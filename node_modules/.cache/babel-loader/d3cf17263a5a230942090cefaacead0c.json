{"remainingRequest":"/home/pi/MothersCall/node_modules/thread-loader/dist/cjs.js!/home/pi/MothersCall/node_modules/babel-loader/lib/index.js!/home/pi/MothersCall/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pi/MothersCall/src/components/UpdateItem.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/pi/MothersCall/src/components/UpdateItem.vue","mtime":1534913694005},{"path":"/home/pi/MothersCall/node_modules/cache-loader/dist/cjs.js","mtime":1530586025002},{"path":"/home/pi/MothersCall/node_modules/thread-loader/dist/cjs.js","mtime":1530586033202},{"path":"/home/pi/MothersCall/node_modules/babel-loader/lib/index.js","mtime":1529635966000},{"path":"/home/pi/MothersCall/node_modules/vue-loader/lib/index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.promise\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport InputField from './InputField.vue';\nexport default {\n  components: {\n    \"input-field\": InputField\n  },\n  name: \"item_form\",\n  props: {\n    item: {\n      type: Object,\n      categFields: {\n        type: Object\n      }\n    },\n    compCateg: {\n      type: String\n    },\n    itemNum: {\n      type: Number\n    }\n  },\n  data: function data() {\n    return {\n      title: \"Display Info\",\n      formValues: {},\n      imgUrl: \"\"\n    };\n  },\n  mounted: function mounted() {\n    if (this.item.categFields.hasOwnProperty(\"image\")) {\n      this.imgUrl = \"images/\" + this.item.categFields.image;\n    }\n  },\n  methods: {\n    updateItem: function updateItem() {\n      var _this = this;\n\n      this.formValues['id'] = this.item.id;\n      this.formValues['notes'] = this.item.categFields.notes; // Name is always required for 'save' method in Django, so it must be passed as default field\n\n      this.formValues['name'] = this.item.categFields.name; // console.log(this.formValues);\n\n      var router = this.$router;\n      axios.post('motherscnotes/post/' + this.compCateg + '/' + this.formValues.id, this.formValues).then(function (response) {\n        // console.log(response);\n        if (response.statusText == \"OK\") {\n          // Refresh and hide form\n          _this.resetFields();\n        } else {\n          console.log(\"error\");\n          console.log(response.data);\n          alert(\"Error in post\");\n        }\n      });\n    },\n    resetFields: function resetFields() {\n      this.$emit(\"refreshCateg\", this.compCateg);\n    },\n    getValues: function getValues(data) {\n      var property = data[0];\n      var value = data[1];\n      this.formValues[property] = value;\n    }\n  }\n};",{"version":3,"sources":["UpdateItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,UAAA,MAAA,kBAAA;AACA,eAAA;AACA,cAAA;AACA,mBAAA;AADA,GADA;AAIA,QAAA,WAJA;AAKA,SAAA;AACA,UAAA;AACA,YAAA,MADA;AAEA,mBAAA;AACA,cAAA;AADA;AAFA,KADA;AAOA,eAAA;AACA,YAAA;AADA,KAPA;AAUA,aAAA;AACA,YAAA;AADA;AAVA,GALA;AAmBA,MAnBA,kBAmBA;AACA,WAAA;AACA,aAAA,cADA;AAEA,kBAAA,EAFA;AAGA,cAAA;AAHA,KAAA;AAKA,GAzBA;AA0BA,SA1BA,qBA0BA;AACA,QAAA,KAAA,IAAA,CAAA,WAAA,CAAA,cAAA,CAAA,OAAA,CAAA,EAAA;AACA,WAAA,MAAA,GAAA,YAAA,KAAA,IAAA,CAAA,WAAA,CAAA,KAAA;AACA;AACA,GA9BA;AA+BA,WAAA;AACA,cADA,wBACA;AAAA;;AACA,WAAA,UAAA,CAAA,IAAA,IAAA,KAAA,IAAA,CAAA,EAAA;AACA,WAAA,UAAA,CAAA,OAAA,IAAA,KAAA,IAAA,CAAA,WAAA,CAAA,KAAA,CAFA,CAGA;;AACA,WAAA,UAAA,CAAA,MAAA,IAAA,KAAA,IAAA,CAAA,WAAA,CAAA,IAAA,CAJA,CAKA;;AACA,UAAA,SAAA,KAAA,OAAA;AACA,YAAA,IAAA,CAAA,wBAAA,KAAA,SAAA,GAAA,GAAA,GAAA,KAAA,UAAA,CAAA,EAAA,EAAA,KAAA,UAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA;AACA,YAAA,SAAA,UAAA,IAAA,IAAA,EAAA;AACA;AACA,gBAAA,WAAA;AACA,SAHA,MAGA;AACA,kBAAA,GAAA,CAAA,OAAA;AACA,kBAAA,GAAA,CAAA,SAAA,IAAA;AACA,gBAAA,eAAA;AACA;AACA,OAXA;AAYA,KApBA;AAqBA,eArBA,yBAqBA;AACA,WAAA,KAAA,CAAA,cAAA,EAAA,KAAA,SAAA;AACA,KAvBA;AAwBA,aAxBA,qBAwBA,IAxBA,EAwBA;AACA,UAAA,WAAA,KAAA,CAAA,CAAA;AACA,UAAA,QAAA,KAAA,CAAA,CAAA;AACA,WAAA,UAAA,CAAA,QAAA,IAAA,KAAA;AACA;AA5BA;AA/BA,CAAA","sourcesContent":["<template>\n    <div class=\"itemCRUD\">\n\t\t<div style=\"margin:auto; width:50%;\">\n\t\t<h2>{{title}}</h2>\n\t\t<form>\n\t\t\t<table>\n\t\t\t\t<input-field v-for=\"(categ, propertyName, inc) in item.categFields\" v-model=\"propertyName\" :ref=\"propertyName\" v-if=\"propertyName != 'notes'\" v-bind:inpVal=\"categ\" v-bind:categ=\"propertyName\" v-on:inputData=\"getValues\" :key=\"inc\"></input-field>\n\t\t\t</table>\n\t\t\t<table>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>Additional notes</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<textarea name=\"notes\" rows=\"6\" cols=\"50\" v-model=\"item.categFields.notes\"></textarea>\n\t\t\t\t\t\t<input type=\"hidden\" name=\"id\" v-model=\"item.id\"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<button @click.prevent=\"updateItem\" type=\"button\" name=\"button\">UPDATE</button>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</form>\n\t\t</div>\n\t\t<div v-if=\"item.categFields.image\">\n\t\t\t<img v-bind:src=\"imgUrl\" style=\"width:400px;\"/>\n\t\t</div>\n    </div>\n</template>\n<script>\n\timport axios from 'axios'\n\timport InputField from './InputField.vue'\n\texport default {\n\t\tcomponents: {\n\t\t\t\"input-field\": InputField\n\t\t},\n\t\tname: \"item_form\",\n\t\tprops: {\n\t\t\titem:{\n\t\t\t\ttype: Object,\n\t\t\t\tcategFields: {\n\t\t\t\t\ttype: Object\n\t\t\t\t}\n\t\t\t},\n\t\t\tcompCateg:{\n\t\t\t\ttype: String\n\t\t\t},\n\t\t\titemNum:{\n\t\t\t\ttype: Number\n\t\t\t},\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\ttitle: \"Display Info\",\n\t\t\t\tformValues: {},\n\t\t\t\timgUrl: \"\",\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tif (this.item.categFields.hasOwnProperty(\"image\")) {\n\t\t\t\tthis.imgUrl = \"images/\" + this.item.categFields.image;\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tupdateItem(){\n\t\t\t\tthis.formValues['id'] = this.item.id;\n\t\t\t\tthis.formValues['notes'] = this.item.categFields.notes;\n\t\t\t\t// Name is always required for 'save' method in Django, so it must be passed as default field\n\t\t\t\tthis.formValues['name'] = this.item.categFields.name;\n\t\t\t\t// console.log(this.formValues);\n\t\t\t\tvar router=this.$router;\n\t\t\t\taxios.post('motherscnotes/post/' + this.compCateg + '/' + this.formValues.id, this.formValues)\n\t\t\t\t.then((response) => {\n\t\t\t\t\t// console.log(response);\n\t\t\t\t\tif (response.statusText == \"OK\") {\n\t\t\t\t\t\t// Refresh and hide form\n\t\t\t\t\t\tthis.resetFields();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(\"error\");\n\t\t\t\t\t\tconsole.log(response.data);\n\t\t\t\t\t\talert(\"Error in post\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tresetFields() {\n\t\t\t\tthis.$emit(\"refreshCateg\", this.compCateg);\n\t\t\t},\n\t\t\tgetValues(data) {\n\t\t\t\tvar property = data[0];\n\t\t\t\tvar value = data[1];\n\t\t\t\tthis.formValues[property] = value;\n\t\t\t},\n\t\t}\n\t}\n</script>\n"],"sourceRoot":"src/components"}]}